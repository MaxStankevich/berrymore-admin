(this["webpackJsonpberrymore-admin"]=this["webpackJsonpberrymore-admin"]||[]).push([[0],{1086:function(e,t,c){},1095:function(e,t,c){},1365:function(e,t,c){},1366:function(e,t,c){},1368:function(e,t,c){},1374:function(e,t,c){"use strict";c.r(t);c(762);var n=c(1),a=c(43),r=c(737),s=c.n(r),i=c(90),o=c.n(i),u=c(41),l=c(154),d=c(95),j=c(19),b=c(1378),O=c(242),m=c(1396),h=c(1397),f=c(1398),p=c(1399),x=c(1400),g=c(1401),y=c(17),v=c(427),I=Object(v.b)({name:"auth",initialState:{user:null},reducers:{setUser:function(e,t){e.user=t.payload}}}),S=I.actions.setUser,N=function(e){return e.auth.user},w=I.reducer,k=function(){var e=Object(l.b)(),t=Object(l.c)(N),c=Object(n.useMemo)((function(){return t||JSON.parse(localStorage.getItem("user"))||{}}),[t]),a=Object(n.useMemo)((function(){return c&&c.role&&"admin"===c.role.name}),[c]),r=Object(n.useCallback)((function(t){var n=Object(y.a)(Object(y.a)({},c),t);e(S(n)),localStorage.setItem("user",JSON.stringify(n))}),[c,e]);return[c,r,a]},F=c(123),C=c(1391),M=c(3),q=b.a.Header,E=function(){var e=Object(l.b)(),t=Object(d.f)();return Object(M.jsx)(q,{className:"site-layout-sub-header-background",children:Object(M.jsx)(F.a,{type:"primary",icon:Object(M.jsx)(C.a,{}),onClick:function(){e(S(null)),localStorage.removeItem("user"),localStorage.removeItem("token"),t.push("/")},children:"\u0412\u044b\u0439\u0442\u0438"})})},z=c(748),A=c(324),Y=c(742),T=c(744),V=c(1390),B=c(1383),D=c(135),J=c.n(D),P=c(747),_={1:"orange",2:"geekblue",3:"blue",4:"cyan",5:"lime",6:"purple",7:"green"},K=function(e){var t=e.id,c=e.name;return Object(M.jsx)(P.a,{color:_[t],children:c})},U=c(1389),H=c(701),L=c.n(H).a.create({baseURL:"/api/"});L.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["x-access-token"]=t),e}),(function(e){return Promise.reject(e)})),L.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&z.a.error({message:e.response.data.message||"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438!"}),Promise.reject(e.response)}));var R=L,W=function(e){var t=e.onSuccess,c=void 0===t?function(){}:t,a=e.url,r=e.successMessage,s=e.errorMessage,i=Object(n.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(!1),b=Object(j.a)(d,2),O=b[0],m=b[1];return Object(M.jsx)(U.a,{title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",placement:"topRight",visible:u,onConfirm:function(){m(!0),R.delete(a).then((function(){z.a.success({message:r}),c()})).catch((function(e){z.a.error({message:s}),console.error(e)})).finally((function(){m(!1),l(!1)}))},okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",okButtonProps:{loading:O,danger:!0},onCancel:function(){l(!1)},children:Object(M.jsx)(F.a,{size:"small",danger:!0,onClick:function(){l(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})},$=function(e){var t=e.orders,c=e.loading,a=e.showCustomer,r=void 0===a||a,s=e.fetchOrders,i=k(),o=Object(j.a)(i,1)[0],l=Object(d.f)(),b=[{title:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",dataIndex:"createdAt",render:function(e){return J()(e).format("D MMMM YYYY, HH:mm")}},{title:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",dataIndex:"products",render:function(e){return e&&!!e.length&&e.map((function(e){return Object(M.jsxs)(n.Fragment,{children:[e.name," (",e.order_product.quantity.replace(/\.0+$/,"")," \u043a\u0433)",Object(M.jsx)("br",{})]},e.id)}))}},{title:"\u041a \u043e\u043f\u043b\u0430\u0442\u0435",dataIndex:"products",render:function(e,t){var c=t.totalAmount||(e||[]).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.order_product.quantity*t.price||0)}),0);return e&&!!e.length&&"".concat(String(c).replace(/\.0+$/,"")," BYN")}}].concat(Object(T.a)(r?[{title:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",dataIndex:"customer",render:function(e){return Object(M.jsxs)(u.b,{to:"/customers/".concat(e.id),children:[e.name," +375",e.phoneNumber]})}}]:[]),[{title:"\u0421\u0442\u0430\u0442\u0443\u0441",dataIndex:"orderStatus",render:function(e){return Object(M.jsx)(K,{id:e.id,name:e.name})}},{title:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",dataIndex:"user",render:function(e){return e&&"".concat(e.fullName||"").concat(e.fullName&&e.username?", ":"").concat(e.username)}},{title:"",key:"action",render:function(e,t){return Object(M.jsxs)(V.b,{size:"middle",children:[Object(M.jsx)(W,{url:"/orders/".concat(t.id),onSuccess:s,successMessage:"\u0417\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),Object(M.jsx)(u.b,{to:"/orders/".concat(t.id,"/edit"),children:Object(M.jsx)(F.a,{type:"primary",ghost:!0,size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(M.jsx)(u.b,{to:"/orders/".concat(t.id),children:Object(M.jsx)(F.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})}),1===t.orderStatusId&&!t.userId&&Object(M.jsx)(F.a,{size:"small",type:"primary",onClick:function(){var e;e=t.id,R.put("/orders/".concat(e),{orderStatusId:2,userId:o.id}).then((function(){z.a.success({message:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u0438\u043d\u044f\u0442 \u0432\u0430\u043c\u0438"}),l.push("/orders/".concat(e))})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}))},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c"})]})}}]);return Object(M.jsx)(B.a,{columns:b,dataSource:t,rowKey:"id",loading:c,pagination:!1})},G=function(e){localStorage.setItem("ordersParams",JSON.stringify(e))},Q=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)(function(){var e=localStorage.getItem("ordersParams");return e?JSON.parse(e):{page:1,size:10,filter:{},order:'[["createdAt", "DESC"]]'}}()),d=Object(j.a)(l,2),b=d[0],O=d[1],m=Object(n.useState)([]),h=Object(j.a)(m,2),f=h[0],p=h[1],x=Object(n.useState)(!1),g=Object(j.a)(x,2),v=g[0],I=g[1],S=Object(n.useState)([]),N=Object(j.a)(S,2),w=N[0],k=N[1],C=Object(n.useState)(!1),q=Object(j.a)(C,2),E=q[0],T=q[1],V=function(e){G(Object(y.a)(Object(y.a)({},b),e)),O((function(t){return Object(y.a)(Object(y.a)({},t),e)}))},B=function(e){G(Object(y.a)(Object(y.a)({},b),{},{page:1,size:10,filter:Object(y.a)(Object(y.a)({},b.filter),e)})),O((function(t){return Object(y.a)(Object(y.a)({},t),{},{page:1,size:10,filter:Object(y.a)(Object(y.a)({},t.filter),e)})}))},D=Object(n.useCallback)((function(){a(!0),R.get("/orders",{params:b}).then((function(e){o(e.data)})).catch((function(){})).finally((function(){a(!1)}))}),[a,o,b]);return Object(n.useEffect)((function(){D()}),[D]),Object(n.useEffect)((function(){var e=setInterval((function(){D()}),6e4);return function(){clearInterval(e)}}),[D]),Object(n.useEffect)((function(){I(!0),R.get("/order_statuses").then((function(e){p(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){I(!1)})),T(!0),R.get("/users").then((function(e){k(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){T(!1)}))}),[]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"table-controls",children:Object(M.jsx)(u.b,{to:"/orders/new",children:Object(M.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})}),Object(M.jsxs)("div",{className:"table-filters",children:["\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c:",Object(M.jsxs)(A.a,{style:{width:300},allowClear:!0,loading:E,value:b.order,onChange:function(e){return V({order:e})},defaultValue:'[["createdAt", "DESC"]]',children:[Object(M.jsx)(A.a.Option,{value:'[["createdAt", "DESC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435)"}),Object(M.jsx)(A.a.Option,{value:'[["createdAt", "ASC"]]',children:"\u043f\u043e \u0434\u0430\u0442\u0435 (\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435)"})]})," ",Object(M.jsx)(A.a,{placeholder:"\u0421\u0442\u0430\u0442\u0443\u0441",style:{width:300},allowClear:!0,loading:v,value:b.filter.orderStatusId,onChange:function(e){return B({orderStatusId:e})},children:f.map((function(e){return Object(M.jsx)(A.a.Option,{value:e.id,children:e.name},e.id)}))})," ",Object(M.jsxs)(A.a,{placeholder:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",style:{width:300},allowClear:!0,value:b.filter.userId,loading:E,onChange:function(e){return B({userId:e})},children:[w.map((function(e){return Object(M.jsxs)(A.a.Option,{value:e.id,children:[e.fullName," ",e.fullName&&e.username?",":null," ",e.username]},e.id)})),Object(M.jsx)(A.a.Option,{value:null,children:"\u041d\u0438\u043a\u0442\u043e"})]})," ",Object(M.jsx)(F.a,{onClick:function(){V({page:1,size:10,filter:{},order:'[["createdAt", "DESC"]]'})},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]}),Object(M.jsx)($,{orders:i.data,loading:c,fetchOrders:D}),Object(M.jsx)("div",{className:"pagination",children:Object(M.jsx)(Y.a,{showSizeChanger:!1,total:i.totalItems,current:b.page,defaultPageSize:b.size,onChange:function(e){V({page:e})}})})]})},X=(c(1086),{admin:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",manager:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Z=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],d=Object(l.c)(N),b=Object(n.useCallback)((function(){a(!0),R.get("/users").then((function(e){o(e.data)})).catch((function(e){})).finally((function(){a(!1)}))}),[a,o]),O=Object(n.useMemo)((function(){return[{title:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",dataIndex:"username",key:"username"},{title:"\u0424\u0418\u041e",dataIndex:"fullName",key:"fullName"},{title:"Email",dataIndex:"email",key:"email"},{title:"\u0420\u043e\u043b\u044c",dataIndex:["role","name"],key:"role",render:function(e){return Object(M.jsx)(P.a,{color:"admin"===e?"geekblue":"green",children:X[e]})}},{title:"",key:"action",render:function(e,t){return Object(M.jsxs)(V.b,{size:"middle",children:[Object(M.jsx)(u.b,{to:t.id===d.id?"/profile":"/users/".concat(t.id),children:Object(M.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),t.id!==d.id&&Object(M.jsx)(W,{url:"/users/".concat(t.id),onSuccess:b,successMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ".concat(t.username," \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"),errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})}}]}),[d,b]);return Object(n.useEffect)((function(){b()}),[b]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"table-controls",children:Object(M.jsx)(u.b,{to:"/users/new",children:Object(M.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(M.jsx)(B.a,{columns:O,dataSource:i,rowKey:"id",loading:c,pagination:!1})]})},ee=c(1385),te=c(208),ce=c(1386),ne=c(1392),ae=A.a.Option,re={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},se={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ie=function(e){var t=e.user,c=void 0===t?{}:t,a=e.onSuccess,r=ee.a.useForm(),s=Object(j.a)(r,1)[0],i=k(),o=Object(j.a)(i,3)[2],u=Object(n.useState)(!1),l=Object(j.a)(u,2),d=l[0],b=l[1],O=Object(n.useState)(!1),m=Object(j.a)(O,2),h=m[0],f=m[1],p=!!c.id;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(ee.a,Object(y.a)(Object(y.a)({},re),{},{form:s,name:"user",onFinish:function(e){b(!0);var t={username:e.username,email:e.email,fullName:e.fullName};p&&h&&(t.password=e.password),e.roleId&&(t.roleId=Number(e.roleId)),(p?R.put("/users/".concat(c.id),t):R.post("/auth/signup",Object(y.a)(Object(y.a)({},t),{},{password:e.password}))).then((function(e){z.a.success({message:p?"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ".concat(e.data.username," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),a&&a(e.data)}),(function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})})).finally((function(){b(!1)}))},initialValues:p?Object(y.a)(Object(y.a)({},c),{},{roleId:String(c.role.id)}):{roleId:"2"},scrollToFirstError:!0,children:[Object(M.jsx)(ee.a.Item,{name:"username",label:Object(M.jsxs)("span",{children:["\u041b\u043e\u0433\u0438\u043d\xa0",Object(M.jsx)(te.a,{title:"\u041b\u043e\u0433\u0438\u043d \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430",children:Object(M.jsx)(ne.a,{})})]}),rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail"}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"fullName",label:"\u0424\u0418\u041e",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),o&&Object(M.jsx)(ee.a.Item,{name:"roleId",label:"\u0420\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u044c!"}],children:Object(M.jsxs)(A.a,{children:[Object(M.jsx)(ae,{value:"1",children:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"}),Object(M.jsx)(ae,{value:"2",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"})]})}),p&&Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},se),{},{children:Object(M.jsx)(F.a,{onClick:function(){f((function(e){return!e}))},children:h?"\u041e\u0442\u043c\u0435\u043d\u0430":"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})),(!p||h)&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ee.a.Item,{name:"password",label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],hasFeedback:!0,children:Object(M.jsx)(ce.a.Password,{autoComplete:"new-password"})}),Object(M.jsx)(ee.a.Item,{name:"confirm",label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},function(e){var t=e.getFieldValue;return{validator:function(e,c){return c&&t("password")!==c?Promise.reject("\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c"):Promise.resolve()}}}],children:Object(M.jsx)(ce.a.Password,{})})]}),Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},se),{},{children:Object(M.jsx)(F.a,{type:"primary",htmlType:"submit",loading:d,children:p?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},oe=function(){var e=k(),t=Object(j.a)(e,2),c=t[0],n=t[1];return Object(M.jsx)(ie,{user:c,onSuccess:function(e){n(e)}})},ue=c(718),le=(c(1095),function(e){return Object(M.jsx)("div",{className:"spinner",children:Object(M.jsx)(ue.a,Object(y.a)({},e))})}),de=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=Object(d.f)();return Object(n.useEffect)((function(){R.get("/users/".concat(r)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[a,r]),c?Object(M.jsx)(ie,{user:c,onSuccess:function(){s.push("/users")}}):Object(M.jsx)(le,{size:"large"})},je=function(){var e=Object(d.f)();return Object(M.jsx)(ie,{onSuccess:function(){e.push("/users")}})},be=c(1379),Oe=c(1380),me=c(426),he=c(406),fe=c(1395),pe=c(1394),xe={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},ge={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},ye=c(211),ve=c(1388),Ie=c(1393),Se=function(e,t){var c=Object(n.useRef)(!1);Object(n.useEffect)((function(){c.current?e():c.current=!0}),t)},Ne=(c(575),[1,2,5]),we=[.5],ke=function(e){var t=e.value,c=void 0===t?"{}":t,n=e.onChange,a=e.productId,r=("string"===typeof c?JSON.parse(c):c)||{},s=function(e){return 3===e?{title:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430: \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u044f\u0449\u0438\u043a\u043e\u0432 \u043e\u0431\u044a\u0451\u043c\u043e\u043c 0.5 \u043a\u0433",values:we}:{title:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430: \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u044f\u0449\u0438\u043a\u043e\u0432 \u043e\u0431\u044a\u0451\u043c\u0430\u043c\u0438 1, 2 \u0438\u043b\u0438 5 \u043a\u0433",values:Ne}}(a);return Se((function(){n("{}")}),[a]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"packing-label",children:s.title}),Object(M.jsx)("div",{className:"packing-wrapper",children:s.values.map((function(e){return Object(M.jsxs)("div",{className:"packing-input-wrapper",children:[Object(M.jsxs)("div",{className:"packing-input-label",children:[e,"\u043a\u0433"]}),Object(M.jsxs)("div",{className:"packing-input",children:[Object(M.jsx)(Ie.a,{style:{fontSize:20},onClick:function(){n(JSON.stringify(Object(y.a)(Object(y.a)({},r),{},Object(ye.a)({},e,(r[e]||1)-1))))}}),Object(M.jsx)(ve.a,{keyboard:!1,onChange:function(t){n(JSON.stringify(Object(y.a)(Object(y.a)({},r),{},Object(ye.a)({},e,t))))},value:r[e]||0,min:0}),Object(M.jsx)(pe.a,{style:{fontSize:20},onClick:function(){n(JSON.stringify(Object(y.a)(Object(y.a)({},r),{},Object(ye.a)({},e,(r[e]||0)+1))))}})]})]},e)}))})]})},Fe=function(e){var t=e.value,c=e.onChange,a=e.form,r=e.fieldName,s=e.products,i=a.getFieldValue(["products",r,"packing"]),o=a.getFieldValue(["products",r,"id"]),u=(s.find((function(e){return e.id===o}))||{}).price*t||0;return Object(n.useEffect)((function(){c(function(e){if(e){var t="string"===typeof e?JSON.parse(e):e;return Object.keys(t).reduce((function(e,c){return e+t[c]*Number(c)}),0)}}(i))}),[i]),Object(M.jsxs)("div",{className:"packing-quantity",children:[Object(M.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",t||0," \u043a\u0433"]}),Object(M.jsx)("div",{children:u?"".concat(u," BYN"):null})]})},Ce=A.a.Option,Me=function(e){var t=e.form,c=e.products,n=e.productsLoading;return Object(M.jsx)(ee.a.List,{name:"products",children:function(e,a){var r=a.add,s=a.remove;return Object(M.jsxs)(M.Fragment,{children:[e.map((function(e){return Object(M.jsxs)("div",{className:"product-item",children:[Object(M.jsxs)(be.a,{gutter:24,align:"middle",children:[Object(M.jsx)(Oe.a,{xs:16,children:Object(M.jsx)(ee.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){var a=(t.getFieldValue("products")||[]).filter((function(e){return e&&e.id})).map((function(e){return e.id})),r=t.getFieldValue(["products",e.key,"id"]),s=c.find((function(e){return e.id===r}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},e),{},{label:"\u0422\u043e\u0432\u0430\u0440",name:[e.name,"id"],fieldKey:[e.fieldKey,"id"],rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440"}],children:Object(M.jsx)(A.a,{disabled:n,children:c.map((function(e){return Object(M.jsxs)(Ce,{disabled:a.includes(e.id),value:e.id,children:[e.name," ",e.price?"(".concat(e.price," BYN \u0437\u0430 1 \u043a\u0433)"):null]},e.id)}))})})),s&&s.description&&Object(M.jsx)("i",{style:{color:"gray"},children:s.description})]})}})}),Object(M.jsx)(Oe.a,{xs:1,children:Object(M.jsxs)(F.a,{type:"text",danger:!0,onClick:function(){return s(e.name)},children:[Object(M.jsx)(fe.a,{twoToneColor:"red"}),"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"]})})]}),Object(M.jsx)(ee.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){var c=t.getFieldValue(["products",e.key,"id"]);return c?Object(M.jsx)(be.a,{children:Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},e),{},{name:[e.name,"packing"],fieldKey:[e.fieldKey,"packing"],label:"\u0424\u0430\u0441\u043e\u0432\u043a\u0430",noStyle:!0,children:Object(M.jsx)(ke,{productId:c})}))}):null}}),Object(M.jsx)(be.a,{children:Object(M.jsx)(ee.a.Item,{shouldUpdate:!0,children:function(){return Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},e),{},{name:[e.name,"quantity"],fieldKey:[e.fieldKey,"quantity"],noStyle:!0,children:Object(M.jsx)(Fe,{form:t,fieldName:e.name,products:c})}))}})})]},e.key)})),e.length<c.length&&Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},ge),{},{children:Object(M.jsx)(F.a,{type:"dashed",onClick:function(){return r()},icon:Object(M.jsx)(pe.a,{}),children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})}))]})}})},qe=function(e){var t=e.validatePhone;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ee.a.Item,{name:["customer","name"],label:"\u0418\u043c\u044f",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0438\u043c\u044f"}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:["customer","phoneNumber"],label:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440",rules:[Object(y.a)({required:!0,message:"\u041d\u043e\u043c\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 9 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u0434\u0430"},t?{len:9}:{})],normalize:function(e){return e.replace(/\D/g,"")},children:Object(M.jsx)(ce.a,{addonBefore:"+375",style:{width:"100%"}})}),Object(M.jsx)(ee.a.Item,{name:["customer","email"],label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(M.jsx)(ce.a,{})})]})},Ee=c(1384),ze=function(e){var t=e.form,c=t.getFieldValue("products")||[],a=t.getFieldValue("deliveryMethodId"),r=c.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.quantity||0)}),0)>=10;return Object(n.useEffect)((function(){3!==a||r||t.setFieldsValue({deliveryMethodId:1})}),[a,r]),Object(M.jsx)(ee.a.Item,{name:"deliveryMethodId",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}],children:Object(M.jsxs)(A.a,{children:[Object(M.jsx)(A.a.Option,{value:1,children:"\u0421\u0430\u043c\u043e\u0432\u044b\u0432\u043e\u0437 (\u0433. \u041c\u0438\u043d\u0441\u043a, \u0443\u043b. \u0418\u043b\u044c\u044f\u043d\u0441\u043a\u0430\u044f 4)"}),Object(M.jsx)(A.a.Option,{value:2,children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043f\u043e \u043c\u0438\u043a\u0440\u043e\u0440\u0430\u0439\u043e\u043d\u0443 \u041b\u0435\u0431\u044f\u0436\u0438\u0439"}),Object(M.jsxs)(A.a.Option,{disabled:!r,value:3,children:["\u042f\u043d\u0434\u0435\u043a\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0437\u0430 \u0441\u0447\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430 ",!r&&"(\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u043f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 \u043e\u0442 10 \u043a\u0433)"]})]})})},Ae=function(e){var t=e.form;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ee.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(M.jsx)(ze,{form:t})}}),Object(M.jsx)(ee.a.Item,{dependencies:["deliveryMethodId"],noStyle:!0,children:function(){var e=t.getFieldValue("deliveryMethodId");return(2===e||3===e)&&Object(M.jsx)(ee.a.Item,{name:"deliveryAddress",label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(M.jsx)(ce.a,{})})}}),Object(M.jsx)(ee.a.Item,{name:"deliveryDate",label:"\u0414\u0430\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}],children:Object(M.jsx)(Ee.a,{format:"DD.MM.YYYY",disabledDate:function(e){return!!e&&(!e.isSame(new Date,"day")&&e<J()().endOf("day"))}})}),Object(M.jsx)(ee.a.Item,{name:"deliveryTime",label:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438"}],children:Object(M.jsxs)(A.a,{children:[Object(M.jsx)(A.a.Option,{value:"9:00-12:00",children:"9:00-12:00"}),Object(M.jsx)(A.a.Option,{value:"16:00-22:00",children:"16:00-22:00"})]})}),Object(M.jsx)(ee.a.Item,{name:"paymentMethod",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"}],children:Object(M.jsxs)(me.a.Group,{children:[Object(M.jsx)(me.a,{value:"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",children:"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435"}),Object(M.jsx)(me.a,{value:"\u041a\u0430\u0440\u0442\u0430",children:"\u041a\u0430\u0440\u0442\u0430"})]})})]})},Ye=A.a.Option,Te={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Ve=function(e){var t=e.order,c=void 0===t?{}:t,a=e.onSuccess,r=ee.a.useForm(),s=Object(j.a)(r,1)[0],i=Object(n.useState)({data:[]}),o=Object(j.a)(i,2),l=o[0],d=o[1],b=Object(n.useState)(!1),O=Object(j.a)(b,2),m=O[0],h=O[1],f=Object(n.useState)([]),p=Object(j.a)(f,2),x=p[0],g=p[1],v=Object(n.useState)(!1),I=Object(j.a)(v,2),S=I[0],N=I[1],w=Object(n.useState)([]),C=Object(j.a)(w,2),q=C[0],E=C[1],Y=Object(n.useState)(!1),T=Object(j.a)(Y,2),V=T[0],B=T[1],D=Object(n.useState)(!1),P=Object(j.a)(D,2),_=P[0],K=P[1],U=Object(n.useState)(1),H=Object(j.a)(U,2),L=H[0],W=H[1],$=k(),G=Object(j.a)($,1)[0],Q=!!c.id,X=Object(n.useState)([]),Z=Object(j.a)(X,2),te=Z[0],ne=Z[1],ae=Object(n.useState)(!1),re=Object(j.a)(ae,2),se=re[0],ie=re[1];Object(n.useEffect)((function(){ie(!0),R.get("/products").then((function(e){ne(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"})})).finally((function(){ie(!1)}))}),[ne,ie]);var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";h(!0),R.get("/customers",{params:{page:1,size:10,search:e}}).then((function(e){d(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){h(!1)}))};Object(n.useEffect)((function(){Q&&s.resetFields()}),[s,Q,c]),Object(n.useEffect)((function(){oe(),N(!0),R.get("/order_statuses").then((function(e){g(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b"})})).finally((function(){N(!1)})),B(!0),R.get("/users").then((function(e){E(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043e\u0432"})})).finally((function(){B(!1)}))}),[d,h]);var le=(c.products||[]).map((function(e){return{id:e.id,quantity:e.order_product.quantity,packing:e.order_product.packing}}));return Object(M.jsxs)(M.Fragment,{children:[Q&&Object(M.jsx)("div",{className:"table-controls",children:Object(M.jsx)(u.b,{to:"/orders/".concat(c.id),children:Object(M.jsx)(F.a,{type:"primary",children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"})})}),Object(M.jsxs)(ee.a,{layout:"vertical",form:s,name:"order",onFinish:function(e){var t=[];if(Q){var n=e.products.map((function(e){return e.id})),r=le.reduce((function(e,t){return n.includes(t.id)||e.push(Object(y.a)(Object(y.a)({},t),{},{_destroy:!0})),e}),[]);e.products=e.products.concat(r)}Q||e.products&&e.products.length?e.products.some((function(e){return!e.quantity}))&&t.push("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u0430"):t.push("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"),t.length?z.a.error({message:t.join(". ")}):(K(!0),(Q?R.put("/orders/".concat(c.id),e):R.post("/orders",e)).then((function(e){z.a.success({message:Q?"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b":"\u0417\u0430\u043a\u0430\u0437 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"}),a&&a(e.data)}),(function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"})})).finally((function(){K(!1)})))},initialValues:Q?{deliveryMethodId:c.deliveryMethodId,deliveryAddress:c.deliveryAddress,deliveryDate:J()(c.deliveryDate),paymentMethod:c.paymentMethod,deliveryTime:c.deliveryTime,name:c.name,notes:c.notes,orderStatusId:c.orderStatusId,userId:c.userId,products:le,totalAmount:String(c.totalAmount||c.products.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.order_product.quantity*t.price||0)}),0)).replace(/\.0+$/,"")}:{deliveryMethodId:1,orderStatusId:1,paymentMethod:"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",products:[{id:null,quantity:1}]},scrollToFirstError:!0,style:{maxWidth:750,margin:"0 auto"},onValuesChange:function(e,t){if(e.products&&te.length){var c=t.products.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=te.find((function(e){return e.id===t.id}))||{};return e+(t.quantity*c.price||0)}),0);s.setFieldsValue({totalAmount:c})}},children:[Object(M.jsx)(Me,{form:s,products:te,productsLoading:se}),Object(M.jsxs)("div",{style:{marginBottom:"50px"},children:[Object(M.jsx)(Ae,{form:s}),Object(M.jsx)(ee.a.Item,{name:"notes",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f",children:Object(M.jsx)(ce.a.TextArea,{})}),Object(M.jsx)(ee.a.Item,{name:"orderStatusId",label:"\u0421\u0442\u0430\u0442\u0443\u0441",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"}],children:Object(M.jsx)(A.a,{loading:S,children:x.map((function(e){return Object(M.jsx)(Ye,{value:e.id,children:e.name},e.id)}))})}),Object(M.jsx)(ee.a.Item,{shouldUpdate:!0,label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:function(){return Object(M.jsxs)(be.a,{gutter:24,children:[Object(M.jsx)(Oe.a,{span:18,children:Object(M.jsx)(ee.a.Item,{name:"userId",noStyle:!0,children:Object(M.jsx)(A.a,{loading:V,children:q.map((function(e){return Object(M.jsx)(Ye,{value:e.id,children:"".concat(e.fullName||""," ").concat(e.email,", ").concat(e.username)},e.id)}))})})}),s.getFieldValue("userId")===G.id?null:Object(M.jsx)(Oe.a,{span:6,children:Object(M.jsx)(F.a,{type:"primary",onClick:function(){s.setFieldsValue({userId:G.id})},children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})})]})}})]}),Q?null:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ee.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(M.jsxs)(me.a.Group,{onChange:function(e){W(e.target.value)},value:L,children:[Object(M.jsx)(me.a,{value:1,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(M.jsx)(me.a,{value:2,children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e"})]})}),1===L?Object(M.jsx)(qe,{}):Object(M.jsx)(ee.a.Item,{name:"customerId",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",rules:[{required:!0,message:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}],children:Object(M.jsx)(A.a,{showSearch:!0,loading:m,notFoundContent:m?Object(M.jsx)(ue.a,{size:"small"}):null,placeholder:"\u041f\u043e\u0438\u0441\u043a",onSearch:Object(he.a)(500,oe),filterOption:!1,children:l.data.map((function(e){return Object(M.jsx)(Ye,{value:e.id,children:"".concat(e.name,", ").concat(e.email,", ").concat(e.phoneNumber)},e.id)}))})})]}),Object(M.jsx)(ee.a.Item,{name:"totalAmount",label:"\u041a \u043e\u043f\u043b\u0430\u0442\u0435 (BYN)",children:Object(M.jsx)(ce.a,{type:"number"})}),Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},Te),{},{children:Object(M.jsx)(F.a,{type:"primary",htmlType:"submit",loading:_,children:Q?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]})]})},Be=function(){var e=Object(d.f)();return Object(M.jsx)(Ve,{onSuccess:function(t){var c=t.id;e.push("/orders/".concat(c))}})},De=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=Object(d.f)(),i=function(){R.get("/orders/".concat(r)).then((function(e){c&&JSON.stringify(c)!==JSON.stringify(e.data)&&(z.a.warning({message:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e\u0442 \u0437\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0438\u0437\u043c\u0435\u043d\u0451\u043d \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445.",duration:0}),a(e.data)),c||a(e.data)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){i()}),[r]),Object(n.useEffect)((function(){var e=setInterval((function(){i()}),6e4);return function(){clearInterval(e)}}),[r,c]),c?Object(M.jsx)(Ve,{order:c,onSuccess:function(e){var t=e.id;s.push("/orders/".concat(t))}}):Object(M.jsx)(le,{size:"large"})},Je=c(1387),Pe=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=function(){R.get("/orders/".concat(r)).then((function(e){c&&JSON.stringify(c)!==JSON.stringify(e.data)&&(z.a.warning({message:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e\u0442 \u0437\u0430\u043a\u0430\u0437 \u0431\u044b\u043b \u0438\u0437\u043c\u0435\u043d\u0451\u043d \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445.",duration:0}),a(e.data)),c||a(e.data)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){s()}),[r]),Object(n.useEffect)((function(){var e=setInterval((function(){s()}),6e4);return function(){clearInterval(e)}}),[r,c]),c?Object(M.jsxs)(Je.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435",extra:Object(M.jsx)(u.b,{to:"/orders/".concat(r,"/edit"),children:Object(M.jsx)(F.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(M.jsx)(Je.a.Item,{label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u0430",children:(c.products||[]).map((function(e){var t=JSON.parse(e.order_product.packing||"{}");return Object(M.jsxs)(n.Fragment,{children:[e.name,": ",e.order_product.quantity.replace(/\.0+$/,"")," \u043a\u0433 (",Object.keys(t).map((function(e){return t[e]?Object(M.jsxs)("span",{children:[e,"\u043a\u0433\xd7",Object(M.jsx)("strong",{children:t[e]}),", "]},e):null})),")",Object(M.jsx)("br",{})]},e.id)}))}),Object(M.jsxs)(Je.a.Item,{label:"\u041a \u043e\u043f\u043b\u0430\u0442\u0435",children:[String(c.totalAmount||(c.products||[]).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.order_product.quantity*t.price||0)}),0)).replace(/\.0+$/,"")," BYN"]}),Object(M.jsx)(Je.a.Item,{label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryMethod.name}),2===c.deliveryMethod.id&&c.deliveryAddress&&Object(M.jsx)(Je.a.Item,{label:"\u0410\u0434\u0440\u0435\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:c.deliveryAddress}),Object(M.jsxs)(Je.a.Item,{label:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438",children:[J()(c.deliveryDate).format("D MMMM YYYY"),Object(M.jsx)("br",{}),c.deliveryTime]}),Object(M.jsx)(Je.a.Item,{label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",children:c.paymentMethod}),Object(M.jsx)(Je.a.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441",children:Object(M.jsx)(K,Object(y.a)({},c.orderStatus))}),Object(M.jsx)(Je.a.Item,{label:"\u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439",children:c.user?Object(M.jsxs)(M.Fragment,{children:[c.user.fullName&&Object(M.jsxs)(M.Fragment,{children:[c.user.fullName,Object(M.jsx)("br",{})]}),c.user.username,Object(M.jsx)("br",{}),c.user.email,Object(M.jsx)("br",{})]}):"\u041d\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d"}),Object(M.jsx)(Je.a.Item,{label:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a",children:Object(M.jsxs)(u.b,{to:"/customers/".concat(c.customer.id),children:[c.customer.name,Object(M.jsx)("br",{}),c.customer.email,Object(M.jsx)("br",{}),"+375".concat(c.customer.phoneNumber)]})}),c.notes&&Object(M.jsx)(Je.a.Item,{label:"\u0414\u043e\u043f. \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",children:c.notes}),Object(M.jsx)(Je.a.Item,{label:"\u0421\u043e\u0437\u0434\u0430\u043d",children:J()(c.createdAt).format("D MMMM YYYY, HH:mm")}),Object(M.jsx)(Je.a.Item,{label:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",children:c.orderStatusHistories.map((function(e){return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)("b",{children:[e.statusName,":"]})," ",J()(e.createdAt).format("D MMMM YYYY, HH:mm"),Object(M.jsx)("br",{})]},e.id)}))})]}):Object(M.jsx)(le,{size:"large"})},_e=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],l=Object(n.useState)({page:1,size:10}),d=Object(j.a)(l,2),b=d[0],O=d[1],m=function(e){O((function(t){return Object(y.a)(Object(y.a)({},t),e)}))},h=Object(n.useCallback)((function(){a(!0),R.get("/customers",{params:b}).then((function(e){o(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u0432"})})).finally((function(){a(!1)}))}),[a,o,b]),f=Object(n.useMemo)((function(){return[{title:"\u0418\u043c\u044f",dataIndex:"name"},{title:"Email",dataIndex:"email"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432",dataIndex:["orders","length"]},{title:"",key:"action",render:function(e,t){return Object(M.jsxs)(V.b,{size:"middle",children:[Object(M.jsx)(W,{url:"/customers/".concat(t.id),onSuccess:h,successMessage:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"}),Object(M.jsx)(u.b,{to:"/customers/".concat(t.id,"/edit"),children:Object(M.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(M.jsx)(u.b,{to:"/customers/".concat(t.id),children:Object(M.jsx)(F.a,{size:"small",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})]})}}]}),[h]);Object(n.useEffect)((function(){h()}),[h]);var p=Object(he.a)(500,(function(e){m({search:e.target.value,page:1,size:10})}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"table-controls",children:Object(M.jsx)(u.b,{to:"/customers/new",children:Object(M.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(M.jsx)("div",{className:"table-filters",children:Object(M.jsx)(ce.a,{style:{width:300},onChange:p,placeholder:"\u041f\u043e\u0438\u0441\u043a"})}),Object(M.jsx)(B.a,{columns:f,dataSource:i.data,rowKey:"id",loading:c,pagination:!1}),Object(M.jsx)("div",{className:"pagination",children:Object(M.jsx)(Y.a,{showSizeChanger:!1,total:i.totalItems,current:b.page,defaultPageSize:b.size,onChange:function(e){m({page:e})}})})]})},Ke=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=Object(n.useCallback)((function(){R.get("/customers/".concat(r)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[r,a]);return Object(n.useEffect)((function(){s()}),[s]),c?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{style:{marginBottom:40},children:Object(M.jsxs)(Je.a,{bordered:!0,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0435",extra:Object(M.jsx)(u.b,{to:"/customers/".concat(r,"/edit"),children:Object(M.jsx)(F.a,{type:"primary",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),children:[Object(M.jsx)(Je.a.Item,{label:"\u0418\u043c\u044f",children:c.name}),Object(M.jsx)(Je.a.Item,{label:"Email",children:c.email}),Object(M.jsxs)(Je.a.Item,{label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",children:["+375",c.phoneNumber]})]})}),Object(M.jsx)("h2",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"}),Object(M.jsx)($,{orders:c.orders,showCustomer:!1,loading:!1,fetchOrders:s})]}):Object(M.jsx)(le,{size:"large"})},Ue={labelCol:{xs:{span:16},sm:{span:8}},wrapperCol:{xs:{span:16},sm:{span:8}}},He={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},Le=function(e){var t=e.customer,c=void 0===t?{}:t,a=e.onSuccess,r=ee.a.useForm(),s=Object(j.a)(r,1)[0],i=Object(n.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1],d=!!c.id;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(ee.a,Object(y.a)(Object(y.a)({},Ue),{},{form:s,name:"customer",onFinish:function(e){l(!0),(d?R.put("/customers/".concat(c.id),e):R.post("/customers",e)).then((function(e){z.a.success({message:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430 ".concat(e.data.organizationName," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),a&&a(e.data)}),(function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"})})).finally((function(){l(!1)}))},initialValues:d?{email:c.email,organizationName:c.organizationName,address:c.address,bankAccountNumber:c.bankAccountNumber,bankName:c.bankName,payerAccountNumber:c.payerAccountNumber}:{},scrollToFirstError:!0,children:[Object(M.jsx)(ee.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 E-mail"},{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 E-mail",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"organizationName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"address",label:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"bankAccountNumber",label:"\u041d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0431\u0430\u043d\u043a\u043e\u0432\u0441\u043a\u043e\u0433\u043e \u0441\u0447\u0451\u0442\u0430",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"bankName",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"payerAccountNumber",label:"\u0423\u041d\u041f",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f (9 \u0446\u0438\u0444\u0440)"}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},He),{},{children:Object(M.jsx)(F.a,{type:"primary",htmlType:"submit",loading:u,children:d?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Re=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=Object(d.f)();return Object(n.useEffect)((function(){R.get("/customers/".concat(r)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(M.jsx)(Le,{customer:c,onSuccess:function(e){var t=e.id;s.push("/customers/".concat(t))}}):Object(M.jsx)(le,{size:"large"})},We=function(){var e=Object(d.f)();return Object(M.jsx)(Le,{onSuccess:function(t){var c=t.id;e.push("/customers/".concat(c))}})},$e=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(j.a)(r,2),i=s[0],o=s[1],l=Object(n.useCallback)((function(){a(!0),R.get("/products").then((function(e){o(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"})})).finally((function(){a(!1)}))}),[a,o]),d=Object(n.useMemo)((function(){return[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",dataIndex:"name"},{title:"\u0426\u0435\u043d\u0430 \u0437\u0430 1 \u043a\u0433 (\u0440\u0443\u0431)",dataIndex:"price"},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",dataIndex:"description"},{title:"",key:"action",render:function(e,t){return Object(M.jsxs)(V.b,{size:"middle",children:[Object(M.jsx)(W,{url:"/products/".concat(t.id),onSuccess:l,successMessage:"\u0422\u043e\u0432\u0430\u0440 \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d",errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"}),Object(M.jsx)(u.b,{to:"/products/".concat(t.id,"/edit"),children:Object(M.jsx)(F.a,{size:"small",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})}}]}),[l]);return Object(n.useEffect)((function(){l()}),[l]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"table-controls",children:Object(M.jsx)(u.b,{to:"/products/new",children:Object(M.jsx)(F.a,{className:"green-button",type:"primary",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),Object(M.jsx)(B.a,{columns:d,dataSource:i,rowKey:"id",loading:c,pagination:!1})]})},Ge=function(e){var t=e.product,c=void 0===t?{}:t,a=e.onSuccess,r=ee.a.useForm(),s=Object(j.a)(r,1)[0],i=Object(n.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1],d=!!c.id;return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(ee.a,Object(y.a)(Object(y.a)({},xe),{},{form:s,name:"product",onFinish:function(e){l(!0),(d?R.put("/products/".concat(c.id),e):R.post("/products",e)).then((function(e){z.a.success({message:d?"\u0414\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"):"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430 ".concat(e.data.name," \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e")}),a&&a(e.data)}),(function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u0430"})})).finally((function(){l(!1)}))},initialValues:d?{name:c.name,description:c.description}:{},scrollToFirstError:!0,children:[Object(M.jsx)(ee.a.Item,{name:"name",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",rules:[{required:!0,message:"\u0412\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",whitespace:!0}],children:Object(M.jsx)(ce.a,{})}),Object(M.jsx)(ee.a.Item,{name:"price",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1 \u043a\u0433 (\u0440\u0443\u0431)",children:Object(M.jsx)(ve.a,{})}),Object(M.jsx)(ee.a.Item,{name:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",children:Object(M.jsx)(ce.a.TextArea,{})}),Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},ge),{},{children:Object(M.jsx)(F.a,{type:"primary",htmlType:"submit",loading:u,children:d?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})}))]}))})},Qe=function(){var e=Object(d.f)();return Object(M.jsx)(Ge,{onSuccess:function(){e.push("/products")}})},Xe=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(d.h)().id,s=Object(d.f)();return Object(n.useEffect)((function(){R.get("/products/".concat(r)).then((function(e){a(e.data)})).catch((function(e){console.log(e)}))}),[r]),c?Object(M.jsx)(Ge,{product:c,onSuccess:function(){s.push("/products")}}):Object(M.jsx)(le,{size:"large"})},Ze=c(738),et=c(1382),tt=function(){var e=Object(n.useState)({data:[]}),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(),s=Object(j.a)(r,2),i=s[0],o=s[1],u=Object(n.useState)({page:1,size:1e4,createdAt:null}),l=Object(j.a)(u,2),d=l[0],b=l[1],O=c.data.reduce((function(e,t){return e.concat(t.products.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{orderStatusId:t.orderStatusId,orderStatusName:t.orderStatus.name})})))}),[]),m=Object(et.a)(O,"name"),h=Object(et.a)(c.data,"orderStatus.name"),f=0,p=Object.keys(h).map((function(e){var t=h[e],c=t.reduce((function(e,t){var c=t.totalAmount||t.products.reduce((function(e,t){return e+=Number(t.order_product.quantity)*Number(t.price)}),0);return e+Number(c)}),0);f+=c;var n=t.reduce((function(e,t){return e.concat(t.products.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{orderStatusId:t.orderStatusId,orderStatusName:t.orderStatus.name})})))}),[]),a=Object(et.a)(n,"name");return{status:e,money:c,quantity:Object.keys(a).map((function(e){return{type:e,value:a[e].reduce((function(e,t){return e+=Number(t.order_product.quantity)}),0)}}))}})),x=Object.keys(m).map((function(e){return{type:e,value:m[e].reduce((function(e,t){return e.all+=Number(t.order_product.quantity),1===t.orderStatusId&&(e.raw+=Number(t.order_product.quantity)),e}),{all:0,raw:0}).all}})),g=x.reduce((function(e,t){return e+Number(t.value)}),0),v={appendPadding:10,data:x,angleField:"value",colorField:"type",radius:1,innerRadius:.6,label:{autoRotate:!1,type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:17}},statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},formatter:function(){return"\u0412\u0441\u0435\u0433\u043e ".concat(g)}}}};return Object(n.useEffect)((function(){o(!0),R.get("/orders",{params:d}).then((function(e){a(e.data)})).catch((function(){})).finally((function(){o(!1)}))}),[d]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ee.a.RangePicker,{style:{marginBottom:"50px",width:300},onChange:function(e,t){!function(e){b((function(t){return Object(y.a)(Object(y.a)({},t),e)}))}({createdAt:JSON.stringify(t)})}}),Object(M.jsxs)(Je.a,{title:"\u0421\u0443\u043c\u043c\u0430 \u043f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430\u043c (BYN)",bordered:!0,layout:"vertical",style:{marginBottom:50},children:[p.map((function(e){return Object(M.jsxs)(Je.a.Item,{label:e.status,children:[e.quantity.map((function(e){return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)("b",{children:[e.type,":"]})," ",e.value," \u043a\u0433",Object(M.jsx)("br",{})]},e.type)})),e.money," BYN"]},e.status)})),Object(M.jsxs)(Je.a.Item,{label:"\u0412\u0441\u0435\u0433\u043e",children:[x.map((function(e){return Object(M.jsxs)(n.Fragment,{children:[Object(M.jsxs)("b",{children:[e.type,":"]})," ",e.value," \u043a\u0433",Object(M.jsx)("br",{})]},e.type)})),f," BYN"]})]}),Object(M.jsx)(Ze.a,Object(y.a)(Object(y.a)({},v),{},{loading:i}))]})},ct=b.a.Content,nt=b.a.Sider,at=[{path:"/",component:Object(M.jsx)(Q,{})},{path:"/orders/new",component:Object(M.jsx)(Be,{})},{path:"/orders/:id/edit",component:Object(M.jsx)(De,{})},{path:"/orders/:id",component:Object(M.jsx)(Pe,{})},{path:"/users",component:Object(M.jsx)(Z,{})},{path:"/users/new",component:Object(M.jsx)(je,{})},{path:"/users/:id",component:Object(M.jsx)(de,{})},{path:"/customers",component:Object(M.jsx)(_e,{})},{path:"/customers/new",component:Object(M.jsx)(We,{})},{path:"/customers/:id",component:Object(M.jsx)(Ke,{})},{path:"/customers/:id/edit",component:Object(M.jsx)(Re,{})},{path:"/products",component:Object(M.jsx)($e,{})},{path:"/products/new",component:Object(M.jsx)(Qe,{})},{path:"/products/:id/edit",component:Object(M.jsx)(Xe,{})},{path:"/profile",component:Object(M.jsx)(oe,{})},{path:"/statistics",component:Object(M.jsx)(tt,{})}],rt=function(){var e=k(),t=Object(j.a)(e,3)[2],c=Object(d.g)(),a=Object(n.useMemo)((function(){return c.pathname.match("/users")?"users":c.pathname.match("/customers")?"customers":c.pathname.match("/products")?"products":c.pathname.match("/profile")?"profile":c.pathname.match("/statistics")?"statistics":"orders"}),[c.pathname]);return Object(M.jsxs)(b.a,{children:[Object(M.jsxs)(nt,{breakpoint:"lg",collapsedWidth:"0",children:[Object(M.jsx)("div",{className:"logo",children:"Berrymore Admin"}),Object(M.jsxs)(O.a,{theme:"dark",mode:"inline",selectedKeys:[a],children:[Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(m.a,{}),children:Object(M.jsx)(u.b,{to:"/",children:"\u0417\u0430\u043a\u0430\u0437\u044b"})},"orders"),t&&Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(h.a,{}),children:Object(M.jsx)(u.b,{to:"/users",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})},"users"),Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(f.a,{}),children:Object(M.jsx)(u.b,{to:"/customers",children:"\u0417\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0438"})},"customers"),Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(p.a,{}),children:Object(M.jsx)(u.b,{to:"/products",children:"\u0422\u043e\u0432\u0430\u0440\u044b"})},"products"),Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(x.a,{}),children:Object(M.jsx)(u.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})},"profile"),t&&Object(M.jsx)(O.a.Item,{icon:Object(M.jsx)(g.a,{}),children:Object(M.jsx)(u.b,{to:"/statistics",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})},"statistics")]})]}),Object(M.jsxs)(b.a,{children:[Object(M.jsx)(E,{}),Object(M.jsx)(ct,{style:{margin:"24px 16px 0"},children:Object(M.jsx)("div",{className:"site-layout-background",style:{padding:24},children:t?Object(M.jsx)(d.c,{children:at.map((function(e){return Object(M.jsx)(d.a,{exact:!0,path:e.path,children:e.component},e.path)}))}):Object(M.jsx)(d.c,{children:at.filter((function(e){return!e.path.match("/users")||!e.path.match("/statistics")})).map((function(e){return Object(M.jsx)(d.a,{exact:!0,path:e.path,children:e.component},e.path)}))})})})]})]})},st=(c(1365),c(1402)),it=(c(1366),function(){var e=k(),t=Object(j.a)(e,2)[1],c=Object(n.useState)(!1),a=Object(j.a)(c,2),r=a[0],s=a[1];return Object(M.jsx)("div",{className:"login-form-wrapper",children:Object(M.jsx)("div",{className:"login-form-container",children:Object(M.jsxs)(ee.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){s(!0),R.post("/auth/signin",{username:e.username,password:e.password}).then((function(e){e.data.accessToken&&localStorage.setItem("token",e.data.accessToken),t(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0432\u0445\u043e\u0434"})})).finally((function(){s(!1)}))},children:[Object(M.jsx)(ee.a.Item,{name:"username",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d"}],children:Object(M.jsx)(ce.a,{prefix:Object(M.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(M.jsx)(ee.a.Item,{name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}],children:Object(M.jsx)(ce.a.Password,{prefix:Object(M.jsx)(st.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(M.jsx)(ee.a.Item,{children:Object(M.jsx)(F.a,{loading:r,type:"primary",htmlType:"submit",className:"login-form-button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})})}),ot=(c(1367),{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:10}}}),ut=function(){var e=ee.a.useForm(),t=Object(j.a)(e,1)[0],c=Object(n.useState)(!1),a=Object(j.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(j.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)([]),b=Object(j.a)(d,2),O=b[0],m=b[1],h=Object(n.useState)(!1),f=Object(j.a)(h,2),p=f[0],x=f[1];Object(n.useEffect)((function(){x(!0),R.get("/products").then((function(e){m(e.data)})).catch((function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"})})).finally((function(){x(!1)}))}),[m,x]);return u?Object(M.jsxs)("div",{style:{maxWidth:750,margin:"50px auto 30px auto",padding:"20px"},children:[Object(M.jsx)("h1",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d!"}),Object(M.jsx)("h3",{children:"\u041c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043c\u043e\u0436\u0435\u043c. \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0447\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043d\u0430\u0441!"}),Object(M.jsx)("a",{href:"http://berrymore.by",children:Object(M.jsx)(F.a,{size:"large",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0430\u0439\u0442"})})]}):Object(M.jsxs)("div",{className:"order-form",children:[Object(M.jsx)("div",{style:{maxWidth:750,margin:"50px auto 30px auto"},children:Object(M.jsxs)("h3",{children:["\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0435 \u0432\u0430\u0441 \u044f\u0433\u043e\u0434\u044b, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u044f\u0449\u0438\u043a\u043e\u0432 \u043e\u0431\u044a\u0451\u043c\u0430\u043c\u0438 1, 2 \u0438\u043b\u0438 5 \u043a\u0433 \u0434\u043b\u044f \u0433\u043e\u043b\u0443\u0431\u0438\u043a\u0438 \u0438 0.5 \u043a\u0433 \u0434\u043b\u044f \u043c\u0430\u043b\u0438\u043d\u044b, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 ",Object(M.jsx)("span",{style:{color:"red"},children:"*"})," \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 ",Object(M.jsx)("b",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),". \u041f\u043e\u0437\u0436\u0435 \u043c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430\u043c."]})}),Object(M.jsxs)(ee.a,{layout:"vertical",form:t,name:"order",onFinish:function(e){var t=[];e.products&&e.products.length?e.products.some((function(e){return!e.quantity}))&&t.push("\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u0432\u0430\u0440\u0430"):t.push("\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u0442\u043e\u0432\u0430\u0440\u044b"),e.products.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.quantity||0)}),0)<10&&3===e.deliveryMethodId&&t.push("\u042f\u043d\u0434\u0435\u043a\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0437\u0430\u043a\u0430\u0437\u0435 \u043e\u0442 10 \u043a\u0433"),t.length?z.a.error({message:t.join(". ")}):(s(!0),R.post("/orders",e).then((function(){z.a.success({message:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d"}),l(!0)}),(function(){z.a.error({message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})).finally((function(){s(!1)})))},initialValues:{deliveryMethodId:1,orderStatusId:1,paymentMethod:"\u041d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",products:[{id:null,quantity:1}]},scrollToFirstError:!0,style:{maxWidth:750,margin:"0 auto",paddingBottom:30},children:[Object(M.jsx)(Me,{form:t,products:O,productsLoading:p}),Object(M.jsx)(Ae,{form:t}),Object(M.jsx)(qe,{validatePhone:!0}),Object(M.jsx)(ee.a.Item,{name:"notes",label:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0438 \u043f\u043e\u0436\u0435\u043b\u0430\u043d\u0438\u044f",children:Object(M.jsx)(ce.a.TextArea,{})}),Object(M.jsx)(ee.a.Item,{shouldUpdate:!0,children:function(){var e=(t.getFieldValue("products")||[]).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=O.find((function(e){return e.id===t.id}))||{};return e+(t.quantity*c.price||0)}),0);return"\u0418\u0442\u043e\u0433\u043e \u043a \u043e\u043f\u043b\u0430\u0442\u0435: ".concat(e," BYN")}}),Object(M.jsx)(ee.a.Item,Object(y.a)(Object(y.a)({},ot),{},{children:Object(M.jsx)(F.a,{type:"primary",htmlType:"submit",size:"large",loading:r,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})}))]})]})};J.a.locale("ru");var lt=function(){var e=Object(l.b)(),t=Object(l.c)(N);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t&&e(S(t))}),[e]),t?Object(M.jsx)(rt,{}):Object(M.jsxs)(d.c,{children:[Object(M.jsx)(d.a,{exact:!0,path:"/",children:Object(M.jsx)(it,{})}),Object(M.jsx)(d.a,{exact:!0,path:"/order_form",children:Object(M.jsx)(ut,{})})]})},dt=Object(v.a)({reducer:{auth:w}}),jt=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1403)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(1368);o.a.render(Object(M.jsx)(l.a,{store:dt,children:Object(M.jsx)(a.a,{locale:s.a,children:Object(M.jsx)(u.a,{children:Object(M.jsx)(lt,{})})})}),document.getElementById("root")),jt()},575:function(e,t,c){}},[[1374,1,2]]]);
//# sourceMappingURL=main.9f60d7c3.chunk.js.map